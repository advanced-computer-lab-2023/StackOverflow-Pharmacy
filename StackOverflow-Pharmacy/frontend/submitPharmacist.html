<!DOCTYPE html>
<html lang="en">
<head>
	<title>Pharmacist Registration</title>
    <link rel="stylesheet" type="text/css" href="submitPharmacist.css">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<div class="formcontainer">
		<form class="login100-form validate-form">
			<span class="login100-form-title">
				Pharmacist Registration
			</span>

			<div class="wrap-input100 validate-input" data-validate="Username is required">
				<input class="input100" id="username" type="text" name="username" placeholder="Username" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-user" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Name is required">
				<input class="input100" id="name" type="text" name="name" placeholder="Name" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-user" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Valid email is required: ex@abc.xyz">
				<input class="input100" id="email" type="text" name="email" placeholder="Email" required>
				<span class="focus-input100"></span>
				<span "class="symbol-input100">
					<i class="fa fa-envelope" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Password is required">
				<input class="input100" id="password" type="password" name="password" placeholder="Password" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-lock" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Date of Birth is required">
				<input class="input100" id="birth" type="text" name="birth" placeholder="Date of Birth" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-calendar" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Hourly Rate is required">
				<input class="input100" id="hourlyRate" type="text" name="hourlyRate" placeholder="Hourly Rate" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-money" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Affiliation is required">
				<input class="input100" id="affiliation" type="text" name="affiliation" placeholder="Affiliation" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-building" aria-hidden="true"></i>
				</span>
			</div>

			<div class="wrap-input100 validate-input" data-validate="Education Background is required">
				<input class="input100" id="educationBackground" type="text" name="educationBackground" placeholder="Education Background" required>
				<span class="focus-input100"></span>
				<span class="symbol-input100">
					<i class="fa fa-graduation-cap" aria-hidden="true"></i>
				</span>
			</div>

			<div class="container-login100-form-btn">
				<button class="login100-form-btn" id="registerButton">
					Register
				</button>
			</div>
		</form>
	</div>

	<script>
		const registerButton = document.getElementById('registerButton');
	
		registerButton.addEventListener('click', async () => {
			// Get values from the registration form
			const username = document.getElementById('username').value;
			const name = document.getElementById('name').value;
			const email = document.getElementById('email').value;
			const password = document.getElementById('password').value;
			const birth = document.getElementById('birth').value;
			const hourlyRate = document.getElementById('hourlyRate').value;
			const affiliation = document.getElementById('affiliation').value;
			const educationBackground = document.getElementById('educationBackground').value;
	
			// Construct the user object to send to the server
			const user = {
				username,
				name,
				email,
				password,
				birthdate: birth,
				role: 'Pharmacist',
			};
	
			// Construct the pharmacist object to send to the server
			const pharmacist = {
				hourRate: hourlyRate,
				affiliation,
				educationBackground,
			};
	
			// Send a POST request to your server for pharmacist registration
			try {
				const response = await fetch('http://localhost:4000/api/users/submit', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({ user, pharmacist }),
				});
	
				if (response.status === 201) {
					// Registration successful, you can redirect to another page or show a success message
					alert('Pharmacist registration successful! You can now log in.');
					window.location.href = 'homepage.html'; // Redirect to your login page
				} else {
					// Registration failed, handle the error (e.g., duplicate email, server error, etc.)
					alert('Pharmacist registration failed. Please try again.');
				}
			} catch (error) {
				console.error('Error:', error);
				alert('An error occurred. Please try again later.');
			}
		});
	</script>
	
</body>
</html>
